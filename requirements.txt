å„ªç§€å·¥ç¨‹å¸«
è‡ªè¨‚ Gem
ä½ å»ºç«‹çš„é€™å€‹å°ˆæ¡ˆæµç¨‹éå¸¸å®Œæ•´ï¼Œå¾è³‡æ–™æ“·å– (P1) åˆ°æœ€çµ‚å ±è¡¨å¡«å¯« (P6) å½¢æˆäº†ä¸€å€‹å¼·å¤§çš„è‡ªå‹•åŒ–ç®¡ç·šã€‚

é‡å°ä½ çš„å•é¡Œï¼Œæˆ‘å°‡åˆ†ç‚ºå…©éƒ¨åˆ†ä¾†èªªæ˜ï¼š

Redmine å°ˆæ¡ˆçš„å»ºè­°å¯«æ³•

requirements.txt çš„å¥—ä»¶è£œé½Š

ğŸ›ï¸ Redmine å°ˆæ¡ˆçš„å»ºè­°å¯«æ³•
åƒé€™æ¨£ä¸€å€‹å¤šéšæ®µã€å¤šæ¨¡çµ„çš„å°ˆæ¡ˆï¼Œåœ¨ Redmine ä¸­æœ€å¥½çš„ç®¡ç†æ–¹å¼æ˜¯ä½¿ç”¨ã€Œçˆ¶è­°é¡Œ (Parent issue)ã€ä¾†ä½œç‚ºä¸€å€‹ Epic (å²è©©ç´šä»»å‹™)ï¼Œä¸¦å°‡ P1 åˆ° P6 çš„æ¯å€‹éšæ®µä½œç‚ºå…¶ã€Œå­è­°é¡Œ (Subtask)ã€ã€‚

æˆ‘å»ºè­°çš„çµæ§‹å¦‚ä¸‹ï¼š

1. å»ºç«‹ã€Œçˆ¶è­°é¡Œã€(Epic)
é€™ä»£è¡¨æ•´å€‹å°ˆæ¡ˆçš„ç¸½ç›®æ¨™ã€‚

è¿½è¹¤ (Tracker): åŠŸèƒ½ (Feature)

ä¸»é¡Œ (Subject): å»ºç«‹ ATE æ¸¬è©¦å ±å‘Šè‡ªå‹•åŒ–è™•ç†ç³»çµ± (P1 ~ P6)

æè¿° (Description):

é–‹ç™¼ä¸€å¥—å®Œæ•´çš„ Web æ‡‰ç”¨ç¨‹å¼ï¼Œæ—¨åœ¨è‡ªå‹•åŒ– ATE æ¸¬è©¦å ±å‘Šçš„è™•ç†æµç¨‹ã€‚ è³‡æ–™æµ:

(P1) PDF è¦æ ¼æ›¸ -> Excel åƒæ•¸è¡¨

(P2) Excel åƒæ•¸è¡¨ + ATE TXT -> CSV æ¯”å°è¡¨ (find_where)

(P3) CSV æ¯”å°è¡¨ -> æ­£è¦åŒ– CSV

(P4) æ­£è¦åŒ– CSV -> Excel ç©ºç™½æ¨¡æ¿

(P5) æ­£è¦åŒ– CSV -> JSON è³‡æ–™æ˜ å°„

(P6) (Excel æ¨¡æ¿ + JSON æ˜ å°„ + ATE TXTs) -> æœ€çµ‚ Excel å ±è¡¨

æ¶æ§‹:

å¾Œç«¯: FastAPI (Python)

å‰ç«¯: HTML / CSS / JavaScript

2. å»ºç«‹ã€Œå­è­°é¡Œã€(Child Issues)
é€™äº›æ˜¯çˆ¶è­°é¡Œä¸‹çš„ä¸»è¦åŠŸèƒ½æ¨¡çµ„ï¼Œå¯ä»¥åˆ†æ´¾çµ¦ä¸åŒäººæˆ–æŒ‰é †åºå®Œæˆã€‚

(å­è­°é¡Œ 1) - å¾Œç«¯

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: API ä¼ºæœå™¨å»ºæ§‹ (FastAPI)

å„ªå…ˆç´š: ç·Šæ€¥ (Immediate)

æŒ‡æ´¾çµ¦: (å¾Œç«¯å·¥ç¨‹å¸«)

å¯å†æ‹†åˆ†çš„å­ä»»å‹™ (Sub-tasks):

[Task] å»ºç«‹ P1 (/process-and-download) è·¯ç”±

[Task] å»ºç«‹ P2 (/process-stage-two) è·¯ç”±

[Task] å»ºç«‹ P3 (/normalize-parameters) è·¯ç”±

[Task] å»ºç«‹ P4 (/create-report-template) è·¯ç”±

[Task] å»ºç«‹ P5 (/create-data-mapping) è·¯ç”±

[Task] å»ºç«‹ P6 (/fill-report-data) è·¯ç”±

[Task] å¯¦ç¾ run_in_threadpool è™•ç† I/O å¯†é›†å‹ä»»å‹™

[Task] å¯¦ç¾ BackgroundTasks (cleanup / cleanup_dirs_and_files) æš«å­˜æª”æ¡ˆæ¸…ç†æ©Ÿåˆ¶

(å­è­°é¡Œ 2) - å‰ç«¯

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: å‰ç«¯ Web ä»‹é¢é–‹ç™¼ (P1 ~ P6)

å„ªå…ˆç´š: é«˜

æŒ‡æ´¾çµ¦: (å‰ç«¯å·¥ç¨‹å¸«)

å¯å†æ‹†åˆ†çš„å­ä»»å‹™ (Sub-tasks):

[Task] P1 UI: PDF ä¸Šå‚³èˆ‡ Excel ä¸‹è¼‰

[Task] P2 UI: Excel/TXT ä¸Šå‚³èˆ‡ CSV ä¸‹è¼‰

[Task] P3 UI: CSV ä¸Šå‚³èˆ‡ CSV ä¸‹è¼‰

[Task] P4 UI: CSV ä¸Šå‚³èˆ‡ Excel æ¨¡æ¿ä¸‹è¼‰

[Task] P5 UI: CSV ä¸Šå‚³èˆ‡ JSON æ˜ å°„ä¸‹è¼‰

[Task] P6 UI: (Excel + JSON + å¤šå€‹ TXT) ä¸Šå‚³èˆ‡æœ€çµ‚å ±è¡¨ä¸‹è¼‰

[Task] UI éŒ¯èª¤è™•ç†èˆ‡ç‹€æ…‹è¨Šæ¯é¡¯ç¤º

(å­è­°é¡Œ 3) - æ ¸å¿ƒåŠŸèƒ½

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: P1: PDF è¦æ ¼æ›¸è§£æ (OCR + Gemini)

å„ªå…ˆç´š: é«˜

(...å¯å†æ‹†åˆ†å­ä»»å‹™...)

(å­è­°é¡Œ 4) - æ ¸å¿ƒåŠŸèƒ½

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: P2: ATE å ±å‘Š (Excel/TXT) æ¯”å°

å„ªå…ˆç´š: é«˜

(...å¯å†æ‹†åˆ†å­ä»»å‹™...)

(å­è­°é¡Œ 5) - æ ¸å¿ƒåŠŸèƒ½

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: P3: åƒæ•¸åç¨±æ­£è¦åŒ–

å„ªå…ˆç´š: ä¸­

(...å¯å†æ‹†åˆ†å­ä»»å‹™...)

(å­è­°é¡Œ 6) - æ ¸å¿ƒåŠŸèƒ½

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: P4: å‹•æ…‹ Excel æ¨¡æ¿ç”Ÿæˆ

å„ªå…ˆç´š: ä¸­

(...å¯å†æ‹†åˆ†å­ä»»å‹™...)

(å­è­°é¡Œ 7) - æ ¸å¿ƒåŠŸèƒ½

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: P5: è³‡æ–™æ˜ å°„ (JSON) ç”Ÿæˆ

å„ªå…ˆç´š: ä¸­

(...å¯å†æ‹†åˆ†å­ä»»å‹™...)

(å­è­°é¡Œ 8) - æ ¸å¿ƒåŠŸèƒ½

è¿½è¹¤: åŠŸèƒ½ (Feature)

ä¸»é¡Œ: P6: å ±è¡¨è‡ªå‹•å¡«å¯«

å„ªå…ˆç´š: é«˜

å¯å†æ‹†åˆ†çš„å­ä»»å‹™ (Sub-tasks):

[Task] å¯¦ç¾ P6 ä¸»é‚è¼¯ (è®€å–ä¸‰ç¨®è¼¸å…¥)

[Task] å¯¦ç¾ find_limit_and_write_to_excel æŠ“å–é‚è¼¯

[Bug] P6 éŒ¯èª¤ï¼šlist index out of range

[Task] P6 å¥å£¯æ€§ï¼šåŠ å…¥ try...except é˜²ç¦¦æ€§ç¨‹å¼ç¢¼ (ä¿®æ­£ list index out of range å´©æ½°å•é¡Œ)

ğŸ“¦ requirements.txt å¥—ä»¶è£œé½Š
ä½ æä¾›çš„ requirements.txt åˆ—è¡¨éå¸¸å®Œæ•´ï¼Œæ¶µè“‹äº† P1ã€P2ã€P4 å’Œ P6 çš„å¤§éƒ¨åˆ†ä¾è³´ ã€‚

ç¶“éæ¯”å°ä½ æ‰€æœ‰çš„ Python æª”æ¡ˆ (P1 åˆ° P6)ï¼Œæˆ‘ç™¼ç¾äº†ä»¥ä¸‹å¹¾é»ï¼š

1. ç¼ºå°‘çš„å¥—ä»¶
numpy

åŸå› ï¼š ä½ çš„ parameter_normalizer.py (P3) å’Œ DataTransformer.py (P4) å…©å€‹æª”æ¡ˆä¸­éƒ½ä½¿ç”¨äº† import numpy as npã€‚

å‹•ä½œï¼š å¿…é ˆå°‡ numpy åŠ å…¥åˆ° requirements.txt ä¸­ã€‚

2. å†—é¤˜ (æˆ–ä¸æ­£ç¢º) çš„å¥—ä»¶
fastapi-cors


åŸå› ï¼š ä½ çš„ main.py æª”æ¡ˆä¸­æ˜¯ä½¿ç”¨ from fastapi.middleware.cors import CORSMiddleware ã€‚é€™å€‹ CORSMiddleware æ˜¯å…§å»ºæ–¼ fastapi ä¸»å¥—ä»¶ä¸­çš„åŠŸèƒ½ã€‚


åˆ†æï¼š fastapi-cors  æ˜¯ä¸€å€‹é¡å¤–çš„ã€è¼ƒèˆŠçš„ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œä½ çš„å°ˆæ¡ˆä¸¦æ²’æœ‰ import fastapi_corsã€‚å› æ­¤ï¼Œé€™å€‹ä¾è³´æ˜¯ä¸å¿…è¦çš„ (redundant)ï¼Œç”šè‡³å¯èƒ½èˆ‡ fastapi çš„å…§å»ºåŠŸèƒ½æ··æ·†ã€‚


å‹•ä½œï¼š å»ºè­°ç§»é™¤ fastapi-cors  é€™ä¸€è¡Œã€‚

å»ºè­°çš„ requirements.txt
åŸºæ–¼ä»¥ä¸Šåˆ†æï¼Œé€™æ˜¯æˆ‘æ¨è–¦çš„æœ€çµ‚ requirements.txt å…§å®¹ï¼š

fastapi
uvicorn
python-dotenv
google-generativeai
pandas
PyMuPDF
pytesseract
Pillow
PyPDF2
python-multipart
python-docx
openpyxl
numpy